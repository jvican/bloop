<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Exporting sbt builds to bloop · Bloop</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Bloop supports sbt &lt;strong&gt;0.13.x&lt;/strong&gt; and &lt;strong&gt;1.x&lt;/strong&gt;.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Exporting sbt builds to bloop · Bloop"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jvican.github.io/bloop/index.html"/><meta property="og:description" content="&lt;p&gt;Bloop supports sbt &lt;strong&gt;0.13.x&lt;/strong&gt; and &lt;strong&gt;1.x&lt;/strong&gt;.&lt;/p&gt;
"/><meta property="og:image" content="https://jvican.github.io/bloop/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jvican.github.io/bloop/img/docusaurus.png"/><link rel="shortcut icon" href="/bloop/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/scripts/code-block-buttons.js"></script><link rel="stylesheet" href="/bloop/css/prism.css"/><link rel="stylesheet" href="/bloop/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/bloop/"><img class="logo" src="/bloop/img/orca-whale-white.svg" alt="Bloop"/><h2 class="headerTitleWithLogo">Bloop</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/bloop/setup" target="_self">Setup</a></li><li class="siteNavGroupActive"><a href="/bloop/docs/what-is-bloop" target="_self">Docs</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/scalacenter/bloop" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Build Tools</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">General</h3><ul><li class="navListItem"><a class="navItem" href="/bloop/docs/what-is-bloop">What is bloop</a></li><li class="navListItem"><a class="navItem" href="/bloop/docs/usage">Usage Guide</a></li><li class="navListItem"><a class="navItem" href="/bloop/docs/cli-reference">CLI Reference</a></li><li class="navListItem"><a class="navItem" href="/bloop/docs/integration">Integration guide</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Build Tools</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/bloop/docs/sbt">sbt</a></li><li class="navListItem"><a class="navItem" href="/bloop/docs/maven">Maven</a></li><li class="navListItem"><a class="navItem" href="/bloop/docs/gradle">Gradle</a></li><li class="navListItem"><a class="navItem" href="/bloop/docs/mill">Mill</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Contributing</h3><ul><li class="navListItem"><a class="navItem" href="/bloop/docs/project-goals">Project Goals</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/scalacenter/bloop/edit/master/docs/sbt.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Exporting sbt builds to bloop</h1></header><article><div><span><p>Bloop supports sbt <strong>0.13.x</strong> and <strong>1.x</strong>.</p>
<h2><a class="anchor" aria-hidden="true" id="install-the-plugin"></a><a href="#install-the-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install the Plugin</h2>
<p>Install bloop in <code>project/plugins.sbt</code>:</p>
<pre><code class="hljs css language-scala">addSbtPlugin(<span class="hljs-string">"ch.epfl.scala"</span> % <span class="hljs-string">"sbt-bloop"</span> % <span class="hljs-string">"1.1.0"</span>)
</code></pre>
<p>And start up or reload your sbt shell to add the plugin to your working build.</p>
<h2><a class="anchor" aria-hidden="true" id="export-the-build"></a><a href="#export-the-build" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Export the Build</h2>
<p>The sbt command <code>bloopInstall</code> exports your sbt build to bloop.</p>
<p>In bloop, an sbt project is repesented as a pair of <code>(sbt project, sbt configuration)</code> and it's
written to a configuration directory. The default location of this directory in your workspace is
<code>.bloop/</code> (you may want to add <code>.bloop/</code> to your <code>.gitignore</code> file).</p>
<p>For example, a build with a single project <code>foo</code> generates two configuration files by
default (one per <a href="https://www.scala-sbt.org/1.x/docs/Multi-Project.html">sbt configuration</a>):</p>
<pre><code class="hljs css language-bash">$ sbt bloopInstall
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> Loading global plugins from /Users/John/.sbt/1.0/plugins
<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>
<span class="token punctuation">[</span>success<span class="token punctuation">]</span> Generated <span class="token string">'/disk/foo/.bloop/foo.json'</span><span class="token keyword">.</span>
<span class="token punctuation">[</span>success<span class="token punctuation">]</span> Generated <span class="token string">'/disk/foo/.bloop/foo-test.json'</span><span class="token keyword">.</span>
</code></pre>
<p>where:</p>
<ol>
<li><code>foo</code> comes from the <code>Compile</code> sbt configuration; and,</li>
<li><code>foo-test</code> comes from the <code>Test</code> sbt configuration and depends on <code>foo</code></li>
</ol>
<p>Any change in the build affecting the semantics of a project (such as adding a new library
dependency, a resource or changing the project name) requires the user to run <code>bloopInstall</code>. When a
project is removed in the build, <code>bloopInstall</code> will automatically remove its old configuration from
the <code>.bloop</code> directory.</p>
<h2><a class="anchor" aria-hidden="true" id="configure-build-export"></a><a href="#configure-build-export" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configure Build Export</h2>
<h3><a class="anchor" aria-hidden="true" id="export-projects-for-additional-configurations"></a><a href="#export-projects-for-additional-configurations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Export Projects For Additional Configurations</h3>
<p>By default, <code>bloopInstall</code> exports projects for the standard <code>Compile</code> and <code>Test</code> sbt
configurations. If your build defines additional configurations in a project, such as
<a href="https://www.scala-sbt.org/1.0/docs/offline/Testing.html#Integration+Tests"><code>IntegrationTest</code></a>, you might want to export these configurations to Bloop
projects too.</p>
<p>Exporting projects for additional sbt configuration requires changes in the build definition in
<code>build.sbt</code>:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> bloop.integrations.sbt.<span class="hljs-type">BloopDefaults</span>

<span class="hljs-comment">// Example of a project configured with an additional `IntegrationTest` configuration</span>
<span class="hljs-keyword">val</span> foo = project
  .configs(<span class="hljs-type">IntegrationTest</span>)
  .settings(
    <span class="hljs-comment">// Scopes bloop configuration settings in `IntegrationTest`</span>
    inConfig(<span class="hljs-type">IntegrationTest</span>)(<span class="hljs-type">BloopDefaults</span>.configSettings)
  )
</code></pre>
<p>When you reload your build, you can check that <code>bloopInstall</code> exports a new project called
<code>foo-it.json</code>.</p>
<pre><code class="hljs">sbt&gt; bloopInstall
[info] <span class="hljs-symbol">Loading</span> global plugins from /<span class="hljs-symbol">Users</span>/<span class="hljs-symbol">John</span>/.sbt/<span class="hljs-number">1.0</span>/plugins
(...)
[success] <span class="hljs-symbol">Generated</span> <span class="hljs-string">'/disk/foo/.bloop/foo.json'</span>.
[success] <span class="hljs-symbol">Generated</span> <span class="hljs-string">'/disk/foo/.bloop/foo-test.json'</span>.
[success] <span class="hljs-symbol">Generated</span> <span class="hljs-string">'/disk/foo/.bloop/foo-it.json'</span>.
</code></pre>
<p>If you want to avoid using Bloop-specific settings in your build definition, add the previous
<code>inConfig</code> line in another file (e.g. a <code>local.sbt</code> file) and add this local file to your global
<code>.gitignore</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="enable-generation-for-source-dependencies"></a><a href="#enable-generation-for-source-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enable Generation for Source Dependencies</h3>
<p>Source dependencies are not well supported in sbt. Nonetheless, if you use them in your build and
you want to generate bloop configuration files for them too, add the following to your <code>build.sbt</code>:</p>
<pre><code class="hljs css language-scala"><span class="hljs-comment">// Note that this task has to be scoped globally</span>
bloopAggregateSourceDependencies in <span class="hljs-type">Global</span> := <span class="hljs-literal">true</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="export-main-class-from-sbt"></a><a href="#export-main-class-from-sbt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Export Main Class from sbt</h3>
<p>If you want bloop to export <code>mainClass</code> from your build definition, define either of the following
settings in your <code>build.sbt</code>:</p>
<pre><code class="hljs css language-scala">bloopMainClass in (<span class="hljs-type">Compile</span>, run) := <span class="hljs-type">Some</span>(<span class="hljs-string">"foo.App"</span>)
</code></pre>
<p>The build plugin doesn't intentionally populate the main class directly from sbt's <code>mainClass</code>
because the execution of such a task may trigger compilation of projects in the build.</p>
<h2><a class="anchor" aria-hidden="true" id="verify-installation-and-export"></a><a href="#verify-installation-and-export" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Verify Installation and Export</h2>
<blockquote>
<p>Remember that the build server must be running in the background, as suggested by the <a href="/setup">Setup
page</a>.</p>
</blockquote>
<p>Verify your installation by running <code>bloop projects</code> in the root of the sbt workspace directory.</p>
<pre><code class="hljs css language-bash">$ bloop projects
foo
foo-test
</code></pre>
<p>If the results of <code>bloop projects</code> is empty, check that:</p>
<ol>
<li>You are running the command-line invocation in the root base directory (e.g. <code>/disk/foo</code>).</li>
<li>The sbt build export process completed successfully.</li>
<li>The <code>.bloop/</code> configuration directory contains bloop configuration files.</li>
</ol>
<p>If you suspect bloop is loading the configuration files from somewhere else, use <code>--verbose</code>:</p>
<pre><code class="hljs css language-bash">$ bloop projects --verbose
<span class="token punctuation">[</span>D<span class="token punctuation">]</span> Projects loaded from <span class="token string">'/my-project/.bloop'</span><span class="token keyword">:</span>
foo
foo-test
</code></pre>
<p>Here's a list of bloop commands you can run next to start playing with bloop:</p>
<ol>
<li><code>bloop compile --help</code>: shows the help section for compile.</li>
<li><code>bloop compile foo-test</code>: compiles foo's <code>src/main</code> and <code>src/test</code>.</li>
<li><code>bloop test foo-test -w</code>: runs foo tests repeatedly with file watching enabled.</li>
</ol>
<p>After verifying the export, you can continue using Bloop's command-line application or any build
client integrating with Bloop, such as <a href="https://scalameta.org/metals/">Metals</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="speeding-up-build-export"></a><a href="#speeding-up-build-export" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Speeding Up Build Export</h2>
<p><code>bloopInstall</code> typically completes in 15 seconds for a medium-sized projects once all dependencies
have already been downloaded. However, it can happen that running <code>bloopInstall</code> in your project is
slower than that. This long duration can usually be removed by making some changes in the build.</p>
<p>If you want to speed up this process, here's a list of things you can do.</p>
<p>Ensure that no compilation is triggered during <code>bloopInstall</code>. <code>bloopInstall</code> is intentionally
configured to skip project compilations to make the export process fast. If compilations are
triggered, then it means your build adds certain runtime dependencies in your build graph.</p>
<blockquote>
<p>For example, your build may be forcing the <code>publishLocal</code> of a project <code>a</code> whenever the classpath of
<code>b</code> is computed. Identify this kind of dependencies and prune them.</p>
</blockquote>
<p>Another rule of thumb is to make sure that source and resource generators added to your build by
either you or sbt plugin are incremental and complete as soon as possible.</p>
<p>Lastly, make sure you keep a hot sbt session around as much time as possible. Running <code>bloopInstall</code>
a second time in the sbt session is <em>really</em> fast.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/bloop/docs/integration"><span class="arrow-prev">← </span><span>Integrate with the Build Server</span></a><a class="docs-next button" href="/bloop/docs/maven"><span>Exporting Maven builds to bloop</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#install-the-plugin">Install the Plugin</a></li><li><a href="#export-the-build">Export the Build</a></li><li><a href="#configure-build-export">Configure Build Export</a><ul class="toc-headings"><li><a href="#export-projects-for-additional-configurations">Export Projects For Additional Configurations</a></li><li><a href="#enable-generation-for-source-dependencies">Enable Generation for Source Dependencies</a></li><li><a href="#export-main-class-from-sbt">Export Main Class from sbt</a></li></ul></li><li><a href="#verify-installation-and-export">Verify Installation and Export</a></li><li><a href="#speeding-up-build-export">Speeding Up Build Export</a></li></ul></nav></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'cf5bcb37b134346182da2be3f5e0a76b',
                indexName: 'bloop_scala',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["version:undefined"]}
              });
            </script></body></html>